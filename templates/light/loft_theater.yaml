#  When the TV is on, only the wall lights are controlled by occupancy.
- light:
    name: Loft Theater
    unique_id: loft_theater
    state: |
      {% if is_state('media_player.loft_tv', 'on') %}
        {{ states('light.loft_wall') }}
      {% else %}
        {{ states('light.loft') }}
      {% endif %}
    turn_on:
      action: light.turn_on
      target:
        entity_id: |
          {% if is_state('media_player.loft_tv', 'on') %}
            light.loft_wall
          {% else %}
            light.loft
          {% endif %}
    turn_off:
      action: light.turn_off
      target:
        entity_id: |
          {% if is_state('media_player.loft_tv', 'on') %}
            light.loft_wall
          {% else %}
            light.loft
          {% endif %}
