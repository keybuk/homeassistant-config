title: Roof
path: roof
icon: mdi:home-roof

type: sections
max_columns: 2

badges:
  - type: entity
    entity: binary_sensor.roof_nest_smoke_status
    visibility:
      - condition: state
        entity: binary_sensor.roof_nest_smoke_status
        state: "on"
  - type: entity
    entity: binary_sensor.roof_nest_co_status
    visibility:
      - condition: state
        entity: binary_sensor.roof_nest_co_status
        state: "on"
  - type: entity
    entity: sensor.roof_deck_door_battery
    visibility:
      - condition: state
        entity: binary_sensor.roof_deck_door_battery_low
        state: "on"
  - type: entity
    entity: sensor.roof_west_window_battery
    visibility:
      - condition: state
        entity: binary_sensor.roof_west_window_battery_low
        state: "on"
  - type: entity
    entity: sensor.roof_north_window_battery
    visibility:
      - condition: state
        entity: binary_sensor.roof_north_window_battery_low
        state: "on"

sections:
  # Lights
  - type: grid
    cards:
      - type: heading
        heading: Lights
        icon: mdi:lamps
      - type: tile
        entity: light.roof_stairs
        name: Stairs
        features:
          - type: light-brightness
      - type: tile
        entity: light.roof_deck
        name: Deck

  # Windows
  - type: grid
    cards:
      - type: heading
        heading: Windows
        icon: mdi:blinds-horizontal
      - type: glance
        entities:
          - entity: binary_sensor.roof_west_window
            name: West
          - entity: binary_sensor.roof_north_window
            name: North

  # Security
  - type: grid
    cards:
      - type: heading
        heading: Security
        icon: mdi:cctv
      - type: glance
        entities:
          - entity: binary_sensor.roof_deck_door
            name: Deck Door

  # Automations
  - type: grid
    cards:
      - type: heading
        heading: Automations
        icon: mdi:robot
        badges:
          - type: entity
            entity: binary_sensor.roof_occupancy
            tap_action:
              action: more-info
      - type: entities
        entities:
          - entity: automation.roof_off
            name: "Off"
            secondary_info: last-triggered
            hold_action:
              action: perform-action
              perform_action: automation.trigger
              target:
                entity_id: automation.roof_off
        show_header_toggle: false
